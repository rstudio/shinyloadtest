<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Load Test Shiny Applications • shinyloadtest</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Load Test Shiny Applications">
<meta property="og:description" content="shinyloadtest provides functions for recording user sessions,
    playing those sessions back in parallel to simulate load, and analyzing
    the results.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">shinyloadtest</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Learning
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/analyzing-load-test-logs.html">Case study: interpreting load test results</a>
    </li>
    <li>
      <a href="articles/case-study-scaling.html">Case study: scaling an app</a>
    </li>
    <li>
      <a href="articles/load-testing-authenticated-apps.html">Load testing authenticated apps</a>
    </li>
    <li>
      <a href="articles/limitations-of-shinyloadtest.html">Limitations</a>
    </li>
    <li>
      <a href="articles/faq.html">FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="load-testing-shiny-applications" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#load-testing-shiny-applications" class="anchor"></a>Load Testing Shiny Applications</h1></div>
<p>The <code>shinyloadtest</code> package and the accompanying <a href="https://github.com/rstudio/shinycannon"><code>shinycannon</code></a> software enable load testing deployed Shiny applications.</p>
<p>Load testing helps developers and administrators estimate how many users their application can support. If an application requires tuning, load testing and load test result analysis can be used to identify performance bottlenecks and to guide changes to infrastructure, configuration, or code.</p>
<p>It’s a common misconception that <strong>“Shiny doesn’t scale.”</strong> In actuality, properly-architected Shiny applications can be scaled horizontally, a fact which Sean Lopp was recently able to demonstrate at rstudio::conf 2018. We used <code>shinycannon</code> to simulate 10,000 concurrent users interacting with an application deployed to AWS. You can see a recording of Sean’s talk and the load test demonstration here: <a href="https://www.rstudio.com/resources/videos/scaling-shiny/">Scaling Shiny</a></p>
<p>To get started with <code>shinyloadtest</code>, read through the quick start guide below.</p>
<div class="figure">
<img src="reference/figures/slt_report_screenshot.png" alt="Analysis Example"><p class="caption">Analysis Example</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To perform a load test you’ll need two pieces of software: <code>shinyloadtest</code> and <code>shinycannon</code>.</p>
<ul>
<li>
<code>shinyloadtest</code> is an R package used to generate recordings and analyze results. You should install it on your development machine. If you are installing <code>shinyloadtest</code> within a Linux environment, you will need to install <code>OpenSSL &gt;= 1.0.1</code> and its associated development libraries as those are required by the <a href="https://github.com/rstudio/websocket"><code>websocket</code></a> package. On Debian/Ubuntu systems, install the <code>libssl1.0</code> and <code>libssl1.0-dev</code> software packages. On Redhat/Fedora/CentOS systems, install the <code>openssl</code> and <code>openssl-devel</code> software packages.</li>
<li>
<code>shinycannon</code> is the command-line replay tool. You can install it on your development machine for testing, but for best results we recommend installing it on a server, and preferably not the one the application under test is also on.</li>
</ul>
<div id="shinyloadtest" class="section level3">
<h3 class="hasAnchor">
<a href="#shinyloadtest" class="anchor"></a><code>shinyloadtest</code>
</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">'rstudio/shinyloadtest'</span>)</a></code></pre></div>
</div>
<div id="shinycannon" class="section level3">
<h3 class="hasAnchor">
<a href="#shinycannon" class="anchor"></a><code>shinycannon</code>
</h3>
<p>As opposed to the <code>shinyloadtest</code> R package, <code>shinycannon</code> is installed and run differently depending on platform.</p>
<div id="linux" class="section level4">
<h4 class="hasAnchor">
<a href="#linux" class="anchor"></a>Linux</h4>
<p>Depending on your distribution, <code>shinycannon</code> can be installed using one of the following packages.</p>
<table class="table table">
<caption>Linux Packages</caption>
<thead><tr class="header">
<th align="left">Distribution</th>
<th align="left">Download Link</th>
<th align="left">Install Command</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Ubuntu/Debian</td>
<td align="left"><a href="https://s3.amazonaws.com/rstudio-shinycannon-build/2018-11-01-22:04:59_1.0.0-b267bad/deb/shinycannon_1.0.0-b267bad_amd64.deb">shinycannon_1.0.0-b267bad_amd64.deb</a></td>
<td align="left"><code>sudo dpkg -i shinycannon_1.0.0-b267bad_amd64.deb</code></td>
</tr>
<tr class="even">
<td align="left">Redhat/Fedora/CentOS</td>
<td align="left"><a href="https://s3.amazonaws.com/rstudio-shinycannon-build/2018-11-01-22:04:59_1.0.0-b267bad/rpm/shinycannon-1.0.0-b267bad.x86_64.rpm">shinycannon-1.0.0-b267bad.x86_64.rpm</a></td>
<td align="left"><code>sudo yum install -y shinycannon-1.0.0-b267bad.x86_64.rpm</code></td>
</tr>
</tbody>
</table>
</div>
<div id="macos" class="section level4">
<h4 class="hasAnchor">
<a href="#macos" class="anchor"></a>macOS</h4>
<ol style="list-style-type: decimal">
<li>Install <a href="https://www.java.com/en/download/">Java</a>
</li>
<li>Download <a href="https://s3.amazonaws.com/rstudio-shinycannon-build/2018-11-01-22:04:59_1.0.0-b267bad/bin/shinycannon-1.0.0-b267bad.sh">shinycannon-1.0.0-b267bad.sh</a>
</li>
<li>Install with <code>sudo cp shinycannon-1.0.0-b267bad.sh /usr/local/bin/shinycannon; sudo chmod +x /usr/local/bin/shinycannon</code>
</li>
<li>Run <code>shinycannon -h</code> to see help output, or <code>shinycannon [RECORDING-PATH] [APP-URL]</code> to generate load.</li>
</ol>
</div>
<div id="windows" class="section level4">
<h4 class="hasAnchor">
<a href="#windows" class="anchor"></a>Windows</h4>
<ol style="list-style-type: decimal">
<li>Install <a href="https://www.java.com/en/download/">Java</a>
</li>
<li>Download <a href="https://s3.amazonaws.com/rstudio-shinycannon-build/2018-11-01-22:04:59_1.0.0-b267bad/jar/shinycannon-1.0.0-b267bad.jar">shinycannon-1.0.0-b267bad.jar</a> to the directory you wish to run it in</li>
<li>Run <code>java -jar shinycannon-1.0.0-b267bad.jar -h</code> to see help output, or <code>java -jar shinycannon-1.0.0-b267bad.jar [RECORDING-PATH] [APP-URL]</code> to generate load.</li>
</ol>
</div>
</div>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick Start</h2>
<p>The process for load testing a Shiny application consists of three steps:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Record</strong> a typical user session for the app</li>
<li>
<strong>Replay</strong> the session in parallel, simulating many simultaneous users accessing the app</li>
<li>
<strong>Analyze</strong> the results of the load test and determine if the app performed well enough</li>
</ol>
<p>Rinse and repeat as necessary. Each step is described below.</p>
<div id="step-1-recording" class="section level3">
<h3 class="hasAnchor">
<a href="#step-1-recording" class="anchor"></a>Step 1: Recording</h3>
<p>Record a session using the <code>record_session</code> function in the <code>shinyloadtest</code> package, which takes the URL of the <strong>deployed</strong> application as an argument:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">shinyloadtest<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/shinyloadtest/topics/record_session">record_session</a></span>(<span class="st">'https://shinyapp.example.com/'</span>)</a></code></pre></div>
<p>You should substitute <code>https://shinyapp.example.com/</code> for the URL of the Shiny app you’d like to record. If your application requires authentication you should consult the [authentication article][authentication]. You should also be aware that [certain Shiny features][limitations] are not compatible with shinyloadtest.</p>
<p>Running the function will open a browser displaying the app. Once open, interact with the application as a normal user would and then close the browser. After closing the browser window or tab, a file will be created that contains a recording of the session. This recording, written to <code>recording.log</code> by default, will serve as the basis for the load test.</p>
</div>
<div id="step-2-run-the-load-test" class="section level3">
<h3 class="hasAnchor">
<a href="#step-2-run-the-load-test" class="anchor"></a>Step 2: Run the Load Test</h3>
<p>With the recording in hand, we’re ready to run the load test. The actual test is conducted outside of R using the <code>shinycannon</code> command-line tool. You can run it using your system’s terminal or console program, or you can run it from the RStudio terminal tab.</p>
<p><code>shinycannon</code> accepts two required positional arguments:</p>
<ol style="list-style-type: decimal">
<li>
<strong>[RECORDING-PATH]</strong>: path to the file produced by <code><a href="reference/record_session.html">shinyloadtest::record_session</a></code>
</li>
<li>
<strong>[APP-URL]</strong>: URL of the target Shiny application</li>
</ol>
<p>In addition to these two required arguments, <code>shinycannon</code> accepts a number of optional arguments that can be specified with flags. Of these, the most interesting are:</p>
<ol style="list-style-type: decimal">
<li>
<strong>–workers</strong>: The number of concurrent users to simulate. <code>shinycannon</code> uses threads to represent each user. It defaults to 1.</li>
<li>
<strong>–loaded-duration-minutes</strong>: The duration of the load test, in minutes. This does not include “warmup time”, which is the time shinycannon spends gradually increasing the number of workers, or “cooldown time”, which is the time spent decreasing the number of workers. It defaults to 0, meaning that after all workers have “warmed up”, they will immediately begin to “cool down”. Generally, you’ll want to set this to a duration greater than 0. <code>shinycannon</code> will re-run the recording as necessary to fill the time.</li>
<li>
<strong>–output-dir</strong>: Name of the directory to create and store timing information in.</li>
</ol>
<p>As an example, to run a load test simulating 5 concurrent users for at least 2 minutes, outputting to the directory <code>run1</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1">$ <span class="ex">shinycannon</span> recording.log https://shinyapp.example.com/ --workers 5 --loaded-duration-minutes 2 --output-dir run1</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="ex">2018-08-29</span> 15:06:14.191 INFO [progress] - Running: 0, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="ex">2018-08-29</span> 15:06:14.193 INFO [thread01] - Warming up</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="ex">2018-08-29</span> 15:06:14.195 INFO [thread00] - Waiting for warmup to complete</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="ex">2018-08-29</span> 15:06:19.193 INFO [progress] - Running: 1, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="ex">2018-08-29</span> 15:06:24.194 INFO [progress] - Running: 1, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="ex">2018-08-29</span> 15:06:29.083 INFO [thread02] - Warming up</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="ex">2018-08-29</span> 15:06:29.195 INFO [progress] - Running: 1, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="ex">2018-08-29</span> 15:06:34.195 INFO [progress] - Running: 2, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="ex">2018-08-29</span> 15:06:39.196 INFO [progress] - Running: 2, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="ex">2018-08-29</span> 15:06:43.973 INFO [thread03] - Warming up</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="ex">2018-08-29</span> 15:06:44.196 INFO [progress] - Running: 2, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="ex">2018-08-29</span> 15:06:49.196 INFO [progress] - Running: 3, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="ex">2018-08-29</span> 15:06:54.201 INFO [progress] - Running: 3, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="ex">2018-08-29</span> 15:06:58.862 INFO [thread04] - Warming up</a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="ex">2018-08-29</span> 15:06:59.201 INFO [progress] - Running: 3, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="ex">2018-08-29</span> 15:07:04.201 INFO [progress] - Running: 4, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="ex">2018-08-29</span> 15:07:09.202 INFO [progress] - Running: 4, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="ex">2018-08-29</span> 15:07:13.751 INFO [thread05] - Warming up</a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="ex">2018-08-29</span> 15:07:13.752 INFO [thread00] - Maintaining for 2 minutes (120000 ms)</a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="ex">2018-08-29</span> 15:07:14.202 INFO [progress] - Running: 4, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="ex">2018-08-29</span> 15:07:19.202 INFO [progress] - Running: 5, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="ex">2018-08-29</span> 15:07:24.202 INFO [progress] - Running: 5, Failed: 0, Done: 0</a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="ex">...</span></a></code></pre></div>
<p><code>shinycannon</code> includes detailed help documentation explaining the other arguments:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="ex">shinycannon</span> -h</a></code></pre></div>
<p>During the test, <code>shinycannon</code> reports the progress and number of simulated users. The result of the test is an output directory (<code>run1</code> in the example above) which includes timing information for each session.</p>
</div>
<div id="step-3-analyze-the-results" class="section level3">
<h3 class="hasAnchor">
<a href="#step-3-analyze-the-results" class="anchor"></a>Step 3: Analyze the Results</h3>
<p>The output directory created in step 2 (<code>run1</code>) is the focus of step 3. The <code>shinyloadtest</code> R package provides functions for analyzing the output files from the test.</p>
<p>A tidy data frame of run simulation information can be created using <code><a href="reference/load_runs.html">shinyloadtest::load_runs</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">df &lt;-<span class="st"> </span>shinyloadtest<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/shinyloadtest/topics/load_runs">load_runs</a></span>(<span class="st">"5 workers"</span> =<span class="st"> "./run1"</span>)</a></code></pre></div>
<p>Once the data is loaded into R, a report can be generated using:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">shinyloadtest<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/shinyloadtest/topics/shinyloadtest_report">shinyloadtest_report</a></span>(df, <span class="st">"run1.html"</span>)</a></code></pre></div>
<p>This self contained html report will be opened in your browser for inspection. For further analysis explaination, please visit <a href="articles/analyzing-load-test-logs.html">‘Analysing load test logs’</a>.</p>
</div>
</div>
</div>
<div id="helpful-links" class="section level1">
<h1 class="hasAnchor">
<a href="#helpful-links" class="anchor"></a>Helpful Links</h1>
<ul>
<li><a href="https://community.rstudio.com">RStudio Community</a></li>
<li><a href="https://github.com/rstudio/shinycannon">shinycannon</a></li>
<li>Vignettes:
<ul>
<li><a href="articles/analyzing-load-test-logs.html">Analysing load test logs</a></li>
<li><a href="articles/case-study-scaling.html">Load test case study</a></li>
<li><a href="articles/limitations-of-shinyloadtest.html">Limitations of <code>shinyloadtest</code></a></li>
<li><a href="articles/load-testing-authenticated-apps.html">Load testing authenticated apps</a></li>
<li><a href="articles/faq.html">FAQ</a></li>
</ul>
</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="https://github.com/rstudio/shinyloadtest/issues">https://​github.com/​rstudio/​shinyloadtest/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Alan Dipert <br><small class="roles"> Author, maintainer </small>  </li>
<li>Barret Schloerke <br><small class="roles"> Author </small>  </li>
<li>Barbara Borges <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.rstudio.com"><img src="https://tidyverse.org/rstudio-logo.svg" height="24"></a> <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Alan Dipert, Barret Schloerke, Barbara Borges, <a href="https://www.rstudio.com"><img src="https://tidyverse.org/rstudio-logo.svg" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
