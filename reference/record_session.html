<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Record a Session for Load Test — record_session • shinyloadtest</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Record a Session for Load Test — record_session"><meta property="og:description" content="This function creates a reverse proxy at http://host:port
(http://127.0.0.1:8600 by default) that intercepts and records activity
between your web browser and the Shiny application at target_app_url."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shinyloadtest</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/shinycannon.html">Installing and running shinycannon</a>
    </li>
    <li>
      <a href="../articles/analyzing-load-test-logs.html">Analyzing results</a>
    </li>
    <li>
      <a href="../articles/case-study-scaling.html">Case study: Scaling an app</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Advanced</li>
    <li>
      <a href="../articles/limitations-of-shinyloadtest.html">Limitations of shinyloadtest</a>
    </li>
    <li>
      <a href="../articles/load-testing-authenticated-apps.html">Load Testing Authenticated Apps</a>
    </li>
    <li>
      <a href="../articles/troubleshooting-ssl.html">Troubleshooting SSL</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rstudio/shinyloadtest/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>

    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Record a Session for Load Test</h1>
    <small class="dont-index">Source: <a href="https://github.com/rstudio/shinyloadtest/blob/main/R/shiny-recorder.R" class="external-link"><code>R/shiny-recorder.R</code></a></small>
    <div class="hidden name"><code>record_session.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function creates a <a href="https://en.wikipedia.org/wiki/Reverse_proxy" class="external-link">reverse proxy</a> at <code>http://host:port</code>
(http://127.0.0.1:8600 by default) that intercepts and records activity
between your web browser and the Shiny application at <code>target_app_url</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">record_session</span><span class="op">(</span></span>
<span>  <span class="va">target_app_url</span>,</span>
<span>  host <span class="op">=</span> <span class="st">"127.0.0.1"</span>,</span>
<span>  port <span class="op">=</span> <span class="fl">8600</span>,</span>
<span>  output_file <span class="op">=</span> <span class="st">"recording.log"</span>,</span>
<span>  open_browser <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  connect_api_key <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-target-app-url">target_app_url<a class="anchor" aria-label="anchor" href="#arg-target-app-url"></a></dt>
<dd><p>The URL of the deployed application.</p></dd>


<dt id="arg-host">host<a class="anchor" aria-label="anchor" href="#arg-host"></a></dt>
<dd><p>The host where the proxy will run. Usually localhost is used.</p></dd>


<dt id="arg-port">port<a class="anchor" aria-label="anchor" href="#arg-port"></a></dt>
<dd><p>The port for the reverse proxy. Default is 8600. Change this
default if port 8600 is used by another service.</p></dd>


<dt id="arg-output-file">output_file<a class="anchor" aria-label="anchor" href="#arg-output-file"></a></dt>
<dd><p>The name of the generated recording file.</p></dd>


<dt id="arg-open-browser">open_browser<a class="anchor" aria-label="anchor" href="#arg-open-browser"></a></dt>
<dd><p>Whether to open a browser on the proxy (default=<code>TRUE</code>)
or not (<code>FALSE</code>).</p></dd>


<dt id="arg-connect-api-key">connect_api_key<a class="anchor" aria-label="anchor" href="#arg-connect-api-key"></a></dt>
<dd><p>An Posit Connect api key. It may be useful to use
<code>Sys.getenv("CONNECT_API_KEY")</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Creates a recording file that can be used as input to the
<code>shinycannon</code> command-line load generation tool.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>By default, after creating the reverse proxy, a web browser is opened
automatically. As you interact with the application in the web browser,
activity is written to the <code>output_file</code> (<code>recording.log</code> by default).</p>
<p>To shut down the reverse proxy and complete the recording, close the web
browser tab or window.</p>
<p>Recordings are used as input to the <code>shinycannon</code> command-line
load-generation tool which can be obtained from the <a href="https://rstudio.github.io/shinyloadtest/index.html">shinyloadtest documentation site</a>.</p>
    </div>
    <div id="fileinput-dt-http-post-support">
    <h2><code>fileInput</code>/<code>DT</code>/<code>HTTP POST</code> support</h2>



<p>Shiny's <code><a href="https://rdrr.io/pkg/shiny/man/fileInput.html" class="external-link">shiny::fileInput()</a></code> input for uploading files, the <code>DT</code> package,
and potentially other packages make HTTP POST requests to the target
application. Because POST requests can be large, they are not stored
directly in the recording file. Instead, new files adjacent to the
recording are created for each HTTP POST request intercepted.</p>
<p>The adjacent files are named after the recording with the pattern
<code>&lt;output_file&gt;.post.&lt;N&gt;</code>, where <code>&lt;output_file&gt;</code> is the chosen recording
file name and <code>&lt;N&gt;</code> is the number of the request.</p>
<p>If present, these adjacent files must be kept alongside the recording file
when the recording is played back with the <code>shinycannon</code> tool.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="https://rstudio.github.io/shinyloadtest/"><code>shinyloadtest</code> articles</a></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">record_session</span><span class="op">(</span><span class="st">"https://example.com/your-shiny-app/"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Barret Schloerke, Alan Dipert, Barbara Borges, Posit Software, PBC.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({


    apiKey: '993bbaa8141e65ce07013c0f54fc3277',
    indexName: 'shinyloadtest',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

